<script>
  const LINE_OA_URL = "https://page.line.me/@584bnrkd";  // 改成你的 LINE 官方帳號連結
  const GAS_ENDPOINT = "https://script.google.com/macros/s/https://script.google.com/macros/s/AKfycbxlhBVPXmek5Y8sLMa9COqAGzRt-9-6UqAFOp4aS2a8c3vsMxzfibXcXy3Yoy9BWfPs/exec/exec";  // 改成你的 Google Apps Script 網址

  function getQueryParam(name) {
    const params = new URLSearchParams(window.location.search);
    return params.get(name);
  }

  async function reportAndRedirect() {
    const data = {
      gym: getQueryParam("gym"),
      ua: navigator.userAgent,
      referrer: document.referrer
    };

    await fetch(GAS_ENDPOINT, {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify(data)
    });

    window.location.href = LINE_OA_URL;
  }

  reportAndRedirect();
</script>

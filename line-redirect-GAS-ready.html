<script>
  const LINE_OA_URL = "https://page.line.me/584bnrkd";  // âœ… ä½ çš„ LINE å®˜æ–¹ç¶²å€
  const GAS_ENDPOINT = "https://script.google.com/macros/s/AKfycbyFTRsbSqSnIw4t063BrGve44Ft9vrgJszAxWamLduJAXU90P2jZ2A0xhU7WgShEiz/exec"; // âœ… ä½ çš„ GAS åŸ·è¡Œç¶²å€

  function getQueryParam(name) {
    const params = new URLSearchParams(window.location.search);
    return params.get(name);
  }

  async function reportAndRedirect() {
    const data = {
      gym: getQueryParam("gym"),
      ua: navigator.userAgent,
      referrer: document.referrer
    };

    try {
      const res = await fetch(GAS_ENDPOINT, {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify(data)
      });

      const result = await res.json();
      console.log("âœ… GAS å›å‚³çµæœï¼š", result);

    } catch (err) {
      console.warn("âš ï¸ GAS å‚³é€å¤±æ•—ï¼š", err);
    }

    // âœ… ç„¡è«–æˆåŠŸæˆ–å¤±æ•—ï¼Œæœ€å¾Œéƒ½æœƒè·³è½‰
    window.location.href = LINE_OA_URL;
  }

  // ğŸš€ é é¢è¼‰å…¥å¾Œç«‹å³åŸ·è¡Œ
  reportAndRedirect();
</script>
